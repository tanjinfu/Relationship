<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link rel="stylesheet" href="./Scripts/zTree_v3/css/zTreeStyle/zTreeStyle.css" />
    <script src="./Scripts/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="./Scripts/zTree_v3/js/jquery.ztree.core-3.5.js"></script>
    <script language="JavaScript">
        <!--
		var setting = {
		    async: {
		        enable: true,
		        url: getAsyncUrl,
		        autoParam: ["id", "name=n", "level=lv"],
                type:"get",
		        dataFilter: filter
		    }
		};

		function filter(treeId, parentNode, responseData) {
		    if (!responseData) return null;
            for (var i=0, l=responseData.value.length; i<l; i++) {
                responseData.value[i].name = responseData.value[i].LastName + responseData.value[i].FirstName;
                if (responseData.value[i].Gender==1) {
                    responseData.value[i].isParent = true;
                }
            }
            return responseData.value;
        }
		function getAsyncUrl(treeId, treeNode) {
		    var url = treeNode == undefined ? "/odata/GetRootPersons()" : "/odata/People(" + treeNode.Id + ")/ChildrenByFather";
		    return url;
		};
        $(document).ready(function(){
            $.fn.zTree.init($("#treeDemo"), setting);
        });
        //-->
    </script>
</head>
<body>
    <div>
        <ul id="treeDemo" class="ztree"></ul>
    </div>
</body>
</html>
